[package]
name = "masp-web"
version = "0.1.0"
authors = ["Memas Deligeorgakis <deligeorgakismemas@googlemail.com>"]
edition = "2018"

[lib]
crate-type = ["cdylib", "rlib"]

[features]
default = ["console_error_panic_hook"]
std = ["rand_core/std"]
# std = ["ed25519-consensus/std", "rand/std", "rand_core/std"]

[dependencies]
# wasm pack default
wasm-bindgen = "0.2.63"
js-sys = "0.3.5"
console_error_panic_hook = { version = "0.1.6", optional = true }
wee_alloc = { version = "0.4.5", optional = true }
serde-wasm-bindgen = "0.3.1"

serde = { version = "1.0.130", features = ["derive"] }
rand_core = {version = "0.6", default-features = false}
jubjub = { version = "0.8" }
# masp_proofs = { git = "https://github.com/murisi/masp", branch = "murisi/masp-transaction3", features = ["bundled-prover", "download-params"] }
masp_proofs = { path = "./lib/masp_proofs", features = ["bundled-prover", "download-params"] }
anoma = { git = "https://github.com/anoma/anoma", tag  = "v0.4.0", features = ["rand", "ferveo-tpke"] }

# masp_primitives = { git = "https://github.com/murisi/masp", branch = "murisi/masp-transaction3", features = ["transparent-inputs"] }
# masp_primitives = { git = "https://github.com/anoma/masp", branch = "joe/tx", features = ["transparent-inputs"] }
masp_primitives = { path = "./lib/masp_primitives", features = ["transparent-inputs"] }
zcash_primitives = { git = "https://github.com/zcash/librustzcash", rev = "2425a08" }

# getrandom is a dep of masp_primitives and needs feature "js"
getrandom = { features = ["js"], version = "0.2" }

# externals
borsh = "0.9.0"
ff = {version = "0.11" }
group = "0.11"

[dev-dependencies]
wasm-bindgen-test = "0.3.13"

[profile.release]
# Tell `rustc` to optimize for small code size.
opt-level = "s"

[package.metadata.wasm-pack.profile.release]
wasm-opt = false